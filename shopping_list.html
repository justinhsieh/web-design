<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>購物車</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <!--CSS-->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/shoppingCart_new.css" /
</head>
<body>
<!-- 導覽列 -->
<header>
    <nav
      class="navbar navbar-expand-lg bg-light border-bottom border-1 border-black"
    >
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="#">
          <img src="img/hacker.png" alt="logo" class="logo" />
          <span class="logo-context fs-3 fw-bold">3C用品店 | 購物車</span>
        </a>
        <div class="tool-right me-4">
          <a href="#" alt="account">
            <img src="img/user.png" class="icon pe-2" />
          </a>
          <a href="#" alt="shopping-cart">
            <img src="img/shopping-cart.png" class="icon" />
          </a>
        </div>
      </div>
    </nav>
  </header>
<div class="container py-5">
    <!-- 購物車標題 -->
    <nav class="nav nav-tabs mt-3">
        <a class="nav-link active" data-bs-toggle="tab" href="">宅配/電子票券 (1)</a>
    </nav>
    <!-- 購物車內容 -->
    <div class="cart-item row align-items-center">
        <div class="col-auto">
            <input type="checkbox" class="item-checkbox" checked>
        </div>
        <div class="col-auto">
            <img src="img/小米_Xiaomi_15_Ultra.webp" alt="商品圖片" width="100">
        </div>
        <div class="col">
            <div class="fw-bold">官方旗艦館【小米】Xiaomi 15 Ultra 5G</div>
            <div>編號：11911911</div>
            <div>顏色：經典黑銀</div>
        </div>
        <div class="col-auto fs-5">
            單價: 
            <span class="unit-price text-danger" data-price="37999">$37,999</span>
        </div>
        <div class="col-auto">
            <button class="btn btn-outline-secondary btn-sm decrease">-</button>
            <input type="text" value="1" class="text-center quantity" style="width: 40px;" readonly>
            <button class="btn btn-outline-secondary btn-sm increase">+</button>
        </div>
        <div class="col-auto">
            <a href="#" class="remove-item">移除</a>
        </div>
    </div>

    <!-- 全選 -->
    <div class="row mt-3 align-items-center">
        <div class="col-auto">
            <input type="checkbox" id="check-all" checked>
            <label for="check-all">全選</label>
        </div>
        <div class="col text-end">
            <span class="fs-5 text-danger">商品總金額：$<span id="total-price">37,999</span></span>
            <button class="btn btn-primary" id="payment-button">結帳(1)</button>
        </div>
    </div>
    <div id="payment" style="display: none">
        <!-- 付款資訊 -->
        <div class="mt-4">
            <div class="payment-section text-center">付款資料</div>
            <form>
                <div class="mb-3">
                    <label for="name" class="form-label">姓名</label>
                    <input type="text" class="form-control" id="name" placeholder="ex. 王小明">
                </div>
                <div class="mb-3">
                    <label for="address" class="form-label">地址</label>
                    <input type="text" class="form-control" id="address">
                </div>
                <div class="mb-3">
                    <label for="card" class="form-label">卡號</label>
                    <input type="text" class="form-control" id="card" placeholder="xxxx-xxxx-xxxx">
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">電話</label>
                    <input type="text" class="form-control" id="phone" placeholder="09xx-xxxxxx" readonly>
                </div>
            </form>
        </div>
    
        <!-- 訂單金額 -->
        <div class="total-section text-center mt-3">
            <div class="row">
                <div class="col">信用卡</div>
                <div class="col">=</div>
                <div class="col">本次訂單金額</div>
            </div>
            <div class="row text-danger">
                <div class="col">$</div>
                <div class="col">=</div>
                <div class="col">$<span id="order-total">37,999</span></div>
            </div>
        </div>
    
        <!-- 確認結帳按鈕 -->
        <div class="text-center mt-3">
            <button class="btn confirm-btn" id="confirm-checkout">確認結帳</button>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        function updateTotal() {
            let total = 0;
            $(".cart-item").each(function () {
                let checkbox = $(this).find(".item-checkbox");
                if (checkbox.prop("checked")) {
                    let price = parseInt($(this).find(".unit-price").data("price"));
                    let quantity = parseInt($(this).find(".quantity").val());
                    total += price * quantity;
                }
            });
            $("#total-price, #order-total").text(total.toLocaleString());
        }

        $(".increase").click(function () {
            let quantityInput = $(this).siblings(".quantity");
            let quantity = parseInt(quantityInput.val()) + 1;
            quantityInput.val(quantity);
            updateTotal();
        });

        $(".decrease").click(function () {
            let quantityInput = $(this).siblings(".quantity");
            let quantity = parseInt(quantityInput.val());
            if (quantity > 1) {
                quantityInput.val(quantity - 1);
                updateTotal();
            }
        });

        $(".remove-item").click(function () {
            $(this).closest(".cart-item").remove();
            updateTotal();
        });

        $("#check-all").change(function () {
            $(".item-checkbox").prop("checked", $(this).prop("checked"));
            updateTotal();
        });

        $(".item-checkbox").change(function () {
            updateTotal();
        });

        $("#confirm-checkout").click(function () {
            alert("訂單已提交！");
        });

        $("#payment-button").on("click", function(){
            $("#payment").show();
        });

        updateTotal();
    });
</script>

</body>
</html>
